<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot de Reservas de Laboratorios</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* ESTILOS CORREGIDOS PARA TODOS LOS DISPOSITIVOS */
.tabs-container {
  max-width: 900px;
  margin: 20px auto;
  padding: 20px;
}

.tabs {
  display: flex;
  margin-bottom: 0;
  border-bottom: 2px solid #3498db;
}

.tab-button {
  padding: 14px 30px;
  background-color: #f8f9fa;
  border: none;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  color: #2c3e50;
  position: relative;
  margin-right: 5px;
  border-radius: 8px 8px 0 0;
}

.tab-button.active {
  background-color: #3498db;
  color: white;
}

.tab-button.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: #3498db;
}

.tab-button:hover:not(.active) {
  background-color: #e8f4fc;
}

.tab-content {
  display: none;
  border: 1px solid #ddd;
  border-top: none;
  border-radius: 0 0 8px 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  background-color: white;
}

.tab-content.active {
  display: block;
  animation: fadeIn 0.4s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* CHATBOT - ESTILOS BASE PARA TODOS LOS DISPOSITIVOS */
.chat-container {
  display: flex;
  flex-direction: column;
  height: 70vh;
  max-height: 700px;
  min-height: 500px;
}

.chat-header {
  background-color: #3498db;
  color: white;
  padding: 15px 20px;
}

.chat-header h2 {
  font-size: 1.5rem;
  margin-bottom: 5px;
}

.chat-header p {
  font-size: 1rem;
  opacity: 0.9;
}

.chat-window {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
  background-color: #f9f9f9;
}

.chat-input {
  display: flex;
  padding: 12px;
  background-color: white;
  border-top: 1px solid #e0e0e0;
}

#userInput {
  flex: 1;
  padding: 12px 15px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 1rem;
}

#userInput:focus {
  border-color: #3498db;
  outline: none;
  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
}

#sendButton {
  margin-left: 10px;
  padding: 12px 25px;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: background-color 0.3s;
}

#sendButton:hover {
  background-color: #2980b9;
}

/* IFRAME RESERVAS */
#reservationsFrame {
  width: 100%;
  height: 75vh;
  max-height: 750px;
  min-height: 500px;
  border: none;
  border-radius: 0 0 8px 8px;
}

/* MEDIA QUERIES - RESPONSIVE */
/* Tablet */
@media (max-width: 992px) {
  .tabs-container {
    padding: 15px;
  }
  
  .tab-button {
    padding: 12px 20px;
    font-size: 15px;
  }
  
  .chat-container {
    height: 65vh;
  }
  
  #reservationsFrame {
    height: 70vh;
  }
}

/* Móvil Grande */
@media (max-width: 768px) {
  .tabs-container {
    padding: 10px;
    margin: 10px;
  }
  
  .tab-button {
    padding: 12px 15px;
    font-size: 14px;
  }
  
  .chat-header h2 {
    font-size: 1.3rem;
  }
  
  .chat-header p {
    font-size: 0.9rem;
  }
  
  .chat-container {
    height: 60vh;
    min-height: 400px;
  }
  
  #reservationsFrame {
    height: 65vh;
    min-height: 400px;
  }
}

/* Móvil Pequeño */
@media (max-width: 480px) {
  .tabs-container {
    padding: 8px;
  }
  
  .tabs {
    flex-wrap: wrap;
  }
  
  .tab-button {
    padding: 10px 12px;
    font-size: 13px;
    margin-bottom: 5px;
    flex: 1;
    text-align: center;
  }
  
  .chat-container {
    height: 55vh;
    min-height: 300px;
  }
  
  #reservationsFrame {
    height: 60vh;
    min-height: 300px;
  }
  
  #sendButton {
    padding: 12px 20px;
  }
}

/* Orientación Horizontal */
@media (orientation: landscape) {
  .chat-container {
    height: 80vh;
    min-height: auto;
  }
  
  #reservationsFrame {
    height: 85vh;
    min-height: auto;
  }
}

/* Desktop Grande */
@media (min-width: 1200px) {
  .tabs-container {
    max-width: 1100px;
  }
  
  .chat-container {
    height: 75vh;
    max-height: 800px;
  }
  
  #reservationsFrame {
    height: 80vh;
    max-height: 850px;
  }
}
  </style>
</head>
<body>
  <div class="tabs-container">
    <div class="tabs">
      <button class="tab-button active" data-tab="chat">Chatbot</button>
      <button class="tab-button" data-tab="reservations">Ver Reservas</button>
    </div>
    
    <div id="chat-tab" class="tab-content active">
      <div class="chat-container">
        <div class="chat-header">
          <h2>Chatbot de Laboratorios</h2>
          <p>Consulta disponibilidad o reserva un laboratorio de enfermería</p>
        </div>
        <div class="chat-window" id="chatWindow"></div>
        <div class="chat-input">
          <input type="text" id="userInput" placeholder="Escribe tu mensaje..." autocomplete="off">
          <button id="sendButton">Enviar</button>
        </div>
      </div>
    </div>
    
    <div id="reservations-tab" class="tab-content">
      <iframe id="reservationsFrame" src="reservations.html"></iframe>
    </div>
  </div>

  <script src="chatbot.js"></script>
  <script>
    // Funcionalidad de pestañas - VERSIÓN CORREGIDA
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar chatbot
      if (typeof initChatbot === 'function') {
        initChatbot();
      }
      
      // Configurar pestañas
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          // Remover clase activa
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));
          
          // Activar pestaña seleccionada
          this.classList.add('active');
          const tabId = this.getAttribute('data-tab');
          document.getElementById(`${tabId}-tab`).classList.add('active');
          
          // Redimensionar iframe al cambiar pestaña
          if (tabId === 'reservations') {
            setTimeout(() => {
              const frame = document.getElementById('reservationsFrame');
              if (frame) {
                frame.style.height = '75vh';
              }
            }, 100);
          }
        });
      });
      
      // Asegurar que el chatbot esté visible inicialmente
      document.getElementById('chat-tab').classList.add('active');
    });
  </script>
</body>
</html>